<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>热力图绘画 - 编辑</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --td-brand: #0052d9;
      --td-brand-hover: #003cab;
      --td-danger: #d54941;
      --td-text-1: #1f2329;
      --td-text-2: #5f6b7a;
      --td-bg: #f3f5f7;
      --td-card: #ffffff;
      --td-border: #e7e9ee;
      --td-radius: 14px;
      --td-shadow: 0 8px 24px rgba(0,0,0,.08);
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--td-bg);
      color: var(--td-text-1);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial;
    }
    .td-card{ background: var(--td-card); border: 1px solid var(--td-border); border-radius: var(--td-radius); }
    .td-btn{ border-radius: 999px; }
    .td-primary{ background: var(--td-brand); }
    .td-primary:hover{ background: var(--td-brand-hover); }
    .td-ghost{ border: 1px solid var(--td-border); background: #fff; }
    .td-danger{ background: var(--td-danger); }
    .td-danger:hover{ filter: brightness(.95); }

    /* 画布占位：格点 + 热力渐变，让原型更像“能画” */
    .canvas-mock {
      background:
        radial-gradient(circle at 30% 35%, rgba(255, 77, 79, .65) 0%, rgba(255, 77, 79, 0) 44%),
        radial-gradient(circle at 63% 55%, rgba(255, 190, 0, .55) 0%, rgba(255, 190, 0, 0) 52%),
        radial-gradient(circle at 50% 70%, rgba(0, 191, 178, .35) 0%, rgba(0, 191, 178, 0) 56%),
        linear-gradient(#fff, #fff);
    }
    .grid-overlay {
      background-image:
        linear-gradient(to right, rgba(231,233,238,.8) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(231,233,238,.8) 1px, transparent 1px);
      background-size: 18px 18px;
      opacity: .35;
      pointer-events: none;
      border-radius: 12px;
    }

    /* 左下角“三角尖”触发器 */
    .fab {
      position: fixed;
      left: 16px;
      bottom: 20px;
      z-index: 50;
      width: 52px;
      height: 52px;
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      border: 1px solid var(--td-border);
      box-shadow: var(--td-shadow);
      display: grid;
      place-items: center;
    }
    .fab:active { transform: translateY(1px); }
    .triangle {
      width: 0;
      height: 0;
      border-left: 9px solid transparent;
      border-right: 9px solid transparent;
      border-top: 14px solid var(--td-brand);
      transform: rotate(90deg);
    }
    .fab-hint {
      position: fixed;
      left: 76px;
      bottom: 30px;
      z-index: 49;
      background: rgba(255,255,255,.92);
      border: 1px solid var(--td-border);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      color: var(--td-text-2);
      box-shadow: var(--td-shadow);
    }

    /* 弹出面板（更像小程序的 popup / drawer） */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.25);
      backdrop-filter: blur(2px);
      z-index: 60;
    }
    .sheet {
      position: fixed;
      left: 12px;
      right: 12px;
      bottom: 12px;
      z-index: 70;
      border-radius: 18px;
      background: rgba(255,255,255,.98);
      border: 1px solid var(--td-border);
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
      transform: translateY(12px);
      opacity: 0;
      pointer-events: none;
      transition: .16s ease;
    }
    .sheet.open {
      transform: translateY(0);
      opacity: 1;
      pointer-events: auto;
    }
    .overlay.hidden { display: none; }

    /* 小的“拖拽条”视觉 */
    .grabber{
      width: 56px;
      height: 5px;
      border-radius: 999px;
      background: rgba(95,107,122,.22);
      margin: 10px auto 6px;
    }
  </style>
</head>
<body>
  <div class="px-4 pt-3 pb-2">
    <div class="flex items-center justify-between">
      <div class="text-xs text-[var(--td-text-2)]">9:41</div>
      <div class="flex items-center gap-1 text-[10px] text-[var(--td-text-2)]">
        <span class="inline-block w-3 h-2 rounded-sm border border-[var(--td-border)]"></span>
        <span class="inline-block w-1.5 h-1.5 rounded-full bg-[var(--td-text-2)]"></span>
        <span>5G</span>
      </div>
    </div>
  </div>

  <div class="px-4 pb-4">
    <!-- 顶部导航（保持轻量，不挤占画布） -->
    <div class="flex items-center justify-between mb-2">
      <div class="flex items-center gap-2">
        <button class="td-btn td-ghost px-3 py-2 text-xs">返回</button>
        <div>
          <div class="text-sm font-semibold leading-5">未命名作品</div>
          <div class="text-[11px] text-[var(--td-text-2)]">按住越久，颜色越暖</div>
        </div>
      </div>
      <button class="td-btn td-primary text-white px-4 py-2 text-sm font-medium shadow">保存</button>
    </div>

    <!-- 大画布区域：尽量占满可视空间 -->
    <div class="td-card p-2">
      <div class="relative">
        <div class="canvas-mock w-full rounded-xl" style="height: calc(100vh - 140px);"></div>
        <div class="absolute inset-0 grid-overlay" style="border-radius: 12px;"></div>

        <!-- 交互提示（原型文案） -->
        <div class="absolute left-3 top-3 td-card px-3 py-2" style="box-shadow: var(--td-shadow);">
          <div class="text-xs font-semibold">绘制中（原型）</div>
          <div class="text-[11px] text-[var(--td-text-2)] mt-0.5">长按停留会“升温”，拖动可连续叠加</div>
        </div>

        <!-- 左下角提示（小而不占位） -->
        <div class="absolute left-3 bottom-3 td-card px-3 py-2" style="box-shadow: var(--td-shadow);">
          <div class="text-[11px] text-[var(--td-text-2)]">左下角打开工具</div>
        </div>
      </div>
    </div>
  </div>

  <!-- 左下角“三角尖”按钮（打开设置/工具面板） -->
  <button id="toolFab" class="fab" aria-label="打开工具面板">
    <div class="triangle" aria-hidden="true"></div>
  </button>
  <div class="fab-hint">工具</div>

  <!-- 遮罩 + 弹出小窗口 -->
  <div id="overlay" class="overlay hidden" aria-hidden="true"></div>
  <div id="sheet" class="sheet" role="dialog" aria-modal="true" aria-label="工具面板">
    <div class="grabber"></div>
    <div class="px-4 pb-4">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-semibold">工具与设置</div>
          <div class="text-[11px] text-[var(--td-text-2)] mt-0.5">缩小占用，画布更大（原型）</div>
        </div>
        <button id="closeSheet" class="td-btn td-ghost px-4 py-2 text-xs">关闭</button>
      </div>

      <!-- 主要操作：小按钮即可 -->
      <div class="mt-3 grid grid-cols-4 gap-2">
        <button class="td-btn td-ghost py-2 text-xs">撤回</button>
        <button class="td-btn td-ghost py-2 text-xs opacity-60">重做</button>
        <button class="td-btn td-ghost py-2 text-xs">清空</button>
        <button class="td-btn td-primary text-white py-2 text-xs font-medium">保存</button>
      </div>

      <!-- 参数：更紧凑展示 -->
      <div class="mt-3 grid grid-cols-2 gap-3">
        <div class="td-card p-3">
          <div class="flex items-center justify-between">
            <div class="text-xs font-semibold">画笔半径</div>
            <span class="text-[11px] text-[var(--td-text-2)]">18px</span>
          </div>
          <div class="mt-2">
            <div class="h-2 rounded-full bg-[rgba(0,82,217,.12)] relative">
              <div class="h-2 rounded-full bg-[var(--td-brand)] w-1/2"></div>
              <div class="absolute top-1/2 -translate-y-1/2 left-1/2 w-4 h-4 rounded-full bg-white border border-[var(--td-border)]"></div>
            </div>
          </div>
          <div class="mt-2 text-[11px] text-[var(--td-text-2)]">范围：6 ~ 60</div>
        </div>

        <div class="td-card p-3">
          <div class="flex items-center justify-between">
            <div class="text-xs font-semibold">增热速率</div>
            <span class="text-[11px] text-[var(--td-text-2)]">1.0</span>
          </div>
          <div class="mt-2">
            <div class="h-2 rounded-full bg-[rgba(0,82,217,.12)] relative">
              <div class="h-2 rounded-full bg-[var(--td-brand)] w-1/3"></div>
              <div class="absolute top-1/2 -translate-y-1/2 left-1/3 w-4 h-4 rounded-full bg-white border border-[var(--td-border)]"></div>
            </div>
          </div>
          <div class="mt-2 text-[11px] text-[var(--td-text-2)]">范围：0.2 ~ 3.0</div>
        </div>
      </div>

      <div class="mt-3 text-xs text-[var(--td-text-2)]">
        <div class="td-card p-3 border-dashed" style="border-style: dashed;">
          <div class="text-[var(--td-text-1)] font-medium">弹窗/提示占位</div>
          <div class="mt-1">清空二次确认 / 未保存离开确认 / 保存成功 Toast</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const fab = document.getElementById('toolFab');
      const sheet = document.getElementById('sheet');
      const overlay = document.getElementById('overlay');
      const closeBtn = document.getElementById('closeSheet');

      function openSheet() {
        overlay.classList.remove('hidden');
        sheet.classList.add('open');
        overlay.setAttribute('aria-hidden', 'false');
      }

      function closeSheet() {
        sheet.classList.remove('open');
        overlay.classList.add('hidden');
        overlay.setAttribute('aria-hidden', 'true');
      }

      fab.addEventListener('click', openSheet);
      closeBtn.addEventListener('click', closeSheet);
      overlay.addEventListener('click', closeSheet);
    })();
  </script>
</body>
</html>
